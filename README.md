# ğŸ‰ ì´ë²¤íŠ¸ / ë³´ìƒ ê´€ë¦¬ í”Œë«í¼
ì•ˆë…•í•˜ì„¸ìš” PMë‹˜!
ë§ì”€í•˜ì‹  ìˆ˜ì‘ì—… ì´ë²¤íŠ¸ ê´€ë¦¬ì˜ ë¹„íš¨ìœ¨ì„ í•´ê²°í•˜ê³ ,    
ìš´ì˜ìÂ·ìœ ì €Â·ê°ì‚¬ì ê°ê°ì˜ ì—­í• ì„ ê³ ë ¤í•œ **ì´ë²¤íŠ¸/ë³´ìƒ ê´€ë¦¬ í”Œë«í¼**ì„ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.  
ì´ì œ ìš´ì˜ìëŠ” ììœ ë¡­ê²Œ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•˜ê³  ë³´ìƒì„ ë“±ë¡í•  ìˆ˜ ìˆìœ¼ë©°, ìœ ì €ëŠ” ì¡°ê±´ì„ ë§Œì¡±í•œ í›„ ì§ì ‘ ë³´ìƒ ìš”ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.  
ëª¨ë“  ë‚´ì—­ì€ ì—­í• ì— ë”°ë¼ ì¡°íšŒ ë° ê´€ë¦¬í•  ìˆ˜ ìˆì–´, **ì •í™•í•˜ê³  íˆ¬ëª…í•œ ìš´ì˜**ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.  
ì‹¤ì œ ì‚¬ë‚´ ë„êµ¬ë¡œë„ ì‚¬ìš©ë  ìˆ˜ ìˆë„ë¡ **í™•ì¥ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±**ì„ ê³ ë ¤í•˜ì—¬ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.  

í™•ì¸í•´ë³´ì‹œê³  ê°œì„ ì‚¬í•­ì´ ìˆë‹¤ë©´ ì–¸ì œë“  ë§ì”€ ì£¼ì„¸ìš”! 

---


## ğŸ’» ì‹¤í–‰ ë°©ë²•
### 0ï¸âƒ£ **Docker, Docker Compose**ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

### 1ï¸âƒ£ í”„ë¡œì íŠ¸ í´ë¡  

```bash
git clone https://github.com/your-username/eventRewardControlPlatform.git
cd eventRewardControlPlatform
```

> âš ï¸ Docker ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ `npm install`ì€ ìë™ìœ¼ë¡œ ìˆ˜í–‰ë˜ì§€ë§Œ,  
> VS Codeì—ì„œ íƒ€ì… ì§€ì›ì„ ìœ„í•´ì„œëŠ” ë¡œì»¬ì—ì„œë„ `npm install`ì´ í•„ìš”í•©ë‹ˆë‹¤.

```bash
cd auth && npm install
cd ../event && npm install
cd ../gateway && npm install
```

### 2ï¸âƒ£ Docker ì»¨í…Œì´ë„ˆ ë¹Œë“œ ë° ì‹¤í–‰

```bash
docker compose up --build
```

### 3ï¸âƒ£ ì ‘ì† ê²½ë¡œ
**API ì ‘ê·¼ : http://{IP}:3000/**

### 4ï¸âƒ£ **ì´ˆê¸° Admin ê³„ì • ìƒì„± ê°€ì´ë“œ**
  - ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œ **ìµœì†Œ 1ê°œì˜ ADMIN ê³„ì •**ì´ í•„ìš”í•©ë‹ˆë‹¤.
  - ìµœì´ˆ ì‹¤í–‰ ì‹œì—ëŠ” `auth/controller/public.controller.ts` ë‚´ì˜ **ì—­í•  ë³€ê²½ ê¶Œí•œ ì˜ˆì™¸ ì²˜ë¦¬ ë¶€ë¶„ì„ ì ì‹œ ì£¼ì„ ì²˜ë¦¬**í•˜ì—¬, ê¶Œí•œ ì—†ì´ë„ ì—­í•  ë³€ê²½ì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•´ì£¼ì„¸ìš”.
```ts
// ê¸°ì¡´ ì½”ë“œ ì˜ˆì‹œ
@Roles('ADMIN')
// ìœ„ ì¤„ì„ ì£¼ì„ ì²˜ë¦¬í•˜ì—¬ ì¼ì‹œì ìœ¼ë¡œ ê¶Œí•œ ê²€ì‚¬ë¥¼ ìš°íšŒ
```

### 5ï¸âƒ£ **.env íŒŒì¼ì„ ë³€ê²½ í•´ì£¼ì„¸ìš”!**
  - ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ `.env` íŒŒì¼ ì˜ˆì‹œë¥¼ í•¨ê»˜ ì—…ë¡œë“œí•´ë‘ì—ˆìŠµë‹ˆë‹¤.
  - **ì‹¤ì œ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë³´ì•ˆìƒ .env íŒŒì¼ì„ ì ˆëŒ€ ê³µê°œí•˜ì§€ ë§ì•„ì£¼ì„¸ìš”.**
  - ê° ì„œë¹„ìŠ¤ ë””ë ‰í† ë¦¬(`auth/`, `event/`, `gateway/`)ì— `.env` íŒŒì¼ì´ ì¡´ì¬í•´ì•¼ ì •ìƒ ì‹¤í–‰ë©ë‹ˆë‹¤.

---


## ğŸ” ì‚¬ìš©ì ë“±ë¡ ë° ê¶Œí•œ ìŠ¹ê²© íë¦„ ìš”ì•½

### 1ï¸âƒ£ ì‚¬ìš©ì ê°€ì… ë° ì´ˆê¸° ê¶Œí•œ ì„¤ì •

- ëª¨ë“  ì‚¬ìš©ìëŠ” `/auth/register` APIë¥¼ í†µí•´ ê°€ì…í•©ë‹ˆë‹¤.
- íšŒì›ê°€ì… ì‹œ, ìë™ìœ¼ë¡œ `role: guest`ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.
- ê²ŒìŠ¤íŠ¸ëŠ” ë¡œê·¸ì¸ì€ ê°€ëŠ¥í•˜ì§€ë§Œ, ì´ì™¸ì˜ **ì–´ë– í•œ API**ë„ í˜¸ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
```ts
{
  "eventProgress": [],
  "_id": ObjectId("..."),,
  "username": "auditor",
  "password": "hashed...",
  "role": "auditor",
  "joinedAt": ISODate()
}
```
ğŸ¯ guest ì—­í•  ë„ì… ì´ìœ 
 - ê°€ì… ì¦‰ì‹œ `user` ì—­í• ì„ ë¶€ì—¬í•  ê²½ìš°,
**ê¶Œí•œ ê²€ì¦ ì—†ì´ ì´ë²¤íŠ¸ ì°¸ì—¬ ë° ë³´ìƒ ìš”ì²­ì´ ê°€ëŠ¥í•´ì ¸ ê¸°ëŠ¥ìƒ í—ˆì **ì´ ë°œìƒí•¨.
- ë”°ë¼ì„œ ëª¨ë“  ì‹ ê·œ ê³„ì •ì€ `guest`ë¡œ ë“±ë¡ë˜ë©°, **ê´€ë¦¬ì(admin)ì˜ ìŠ¹ì¸ì´ ìˆì–´ì•¼ ê¶Œí•œì´ ê²©ìƒ**ë©ë‹ˆë‹¤.

---

### 2ï¸âƒ£ ê´€ë¦¬ìì— ì˜í•œ ì—­í•  ê²©ìƒ

- ê´€ë¦¬ì ê³„ì •ì€ `PATCH /auth/user/:userId/role` APIë¥¼ í†µí•´ ì‚¬ìš©ìì˜ ì—­í• ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ê´€ë¦¬ìë§Œ ì´ APIì— ì ‘ê·¼ ê°€ëŠ¥í•˜ë©°, **ì—­í•  ë³€ê²½ ì „ì—ëŠ” ì—„ê²©í•œ ê¶Œí•œ ê²€ì‚¬**ê°€ ìˆ˜í–‰ë©ë‹ˆë‹¤.

--- 

### 3ï¸âƒ£ ì—­í• ì— ë”°ë¥¸ ì ‘ê·¼ ì œí•œ

- `gateway` ì„œë²„ëŠ” ëª¨ë“  ìš”ì²­ì˜ JWTë¥¼ ê²€ì‚¬í•˜ê³ , `x-user-role` í—¤ë”ë¡œ ì‚¬ìš©ì ì—­í• ì„ ë‚´ë¶€ ì„œë¹„ìŠ¤ì— ì „ë‹¬í•©ë‹ˆë‹¤.
- ë‚´ë¶€ ì„œë¹„ìŠ¤ë“¤ì€ ì´ í—¤ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—­í•  ê¶Œí•œì„ ìì²´ì ìœ¼ë¡œ ê²€ì¦í•©ë‹ˆë‹¤.

---

### 4ï¸âƒ£ í† í° ë°œê¸‰ ë° ì¸ì¦ ì²˜ë¦¬

- ë¡œê·¸ì¸ ì‹œ `/auth/login` APIë¥¼ í˜¸ì¶œí•˜ì—¬ JWT í† í°ì„ ë°œê¸‰ë°›ìŠµë‹ˆë‹¤.
- ì´ í† í°ì€ ì´í›„ ëª¨ë“  API í˜¸ì¶œ ì‹œ `Authorization: Bearer <token>` í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- `gateway` ì„œë²„ëŠ” í† í°ì´ ìœ íš¨í•˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ íŒŒì‹±í•˜ì—¬ ë‹¤ìŒ ì„œë¹„ìŠ¤ì— í—¤ë”ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤

--- 

### âœ… ì˜ˆì‹œ íë¦„: ì‹ ê·œ ì‚¬ìš©ì ê°€ì… í›„ ê¶Œí•œ ê²©ìƒê¹Œì§€
1. `POST /auth/signup` â†’ `role: guest`ë¡œ ê°€ì…

2. `PATCH /auth/user/:username/role` (ê´€ë¦¬ì) â†’ `role: user`ë¡œ ìŠ¹ê²©

3. `POST /event/:id/join` â†’ ì´ë²¤íŠ¸ ì°¸ì—¬ ê°€ëŠ¥

4. `POST /event/:id/reward-request` â†’ ì¡°ê±´ ë§Œì¡± ì‹œ ë³´ìƒ ìˆ˜ë ¹

--- 



## ğŸ“¦ ì´ë²¤íŠ¸, ë³´ìƒ ë“±ë¡ ë° ìš”ì²­ê³¼ ë³´ìƒ ì§€ê¸‰ íë¦„ ìš”ì•½ 

### 1ï¸âƒ£ ì´ë²¤íŠ¸ ë“±ë¡

- **ê´€ë¦¬ì** ë˜ëŠ” **ìš´ì˜ì**ê°€ `/event/create` ì—”ë“œí¬ì¸íŠ¸ë¡œ ìƒˆë¡œìš´ ì´ë²¤íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
- ì´ë²¤íŠ¸ëŠ” ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤:
```ts
{
  "name": "3ì¼ ì—°ì† ë¡œê·¸ì¸ ì´ë²¤íŠ¸",
  "type": "login-streak",
  "conditions": { "days": 3 },
  "status": "active",
  "startAt": "2025-05-15T00:00:00Z",
  "endAt": "2025-06-15T23:59:59Z"
}
```
- ìƒì„±ëœ ì´ë²¤íŠ¸ëŠ” `event` ì„œë¹„ìŠ¤ì˜ MongoDBì— ì €ì¥ë©ë‹ˆë‹¤.

---

### 2ï¸âƒ£ ë³´ìƒ ë“±ë¡
- ë“±ë¡ëœ ì´ë²¤íŠ¸ì— ëŒ€í•´ ìš´ì˜ìëŠ” `/event/:id/reward` APIë¥¼ í†µí•´ ë³´ìƒì„ ì¶”ê°€í•©ë‹ˆë‹¤.
- ë³´ìƒì€ `point`, `item`, `coupon` íƒ€ì…ì„ ê°€ì§‘ë‹ˆë‹¤.
- ì´ë²¤íŠ¸ ë³´ìƒì€ ë‹¤ìŒ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤:
```ts
{
  "_id": ObjectId("..."),
  "eventId": ObjectId("..."), // ì´ë²¤íŠ¸ IDë¥¼ ì™¸ë˜í‚¤ë¡œ ê°€ì§‘ë‹ˆë‹¤.
  "rewardType": "point",
  "amount": 100,
  "description": "100 í¬ì¸íŠ¸ ì§€ê¸‰",
  "createdAt": ISODate()
}
```

---

### 3ï¸âƒ£ ì‚¬ìš©ì ì´ë²¤íŠ¸ ì°¸ì—¬
- ì‚¬ìš©ìê°€ `/event/:id/join API`ë¥¼ í†µí•´ ì´ë²¤íŠ¸ì— ì°¸ì—¬í•©ë‹ˆë‹¤.
- ë¼ìš°íŒ… íë¦„ :
  - ìœ ì €ê°€ `POST /event/:id/join` í˜¸ì¶œ
  - Gateway ì„œë²„ â†’ `event-service`
  - `event-service` â†’ ë‚´ë¶€ HTTP ìš”ì²­ â†’ `auth-service`
- ì°¸ì—¬ ì‹œ, `auth-service`ì˜ `user` ì»¬ë ‰ì…˜ì—ì„œ í•´ë‹¹ ìœ ì €ì˜ `eventProgress` ë°°ì—´ì— ìƒˆ í•­ëª©ì´ ë‹¤ìŒê³¼ ê°™ì´ ê¸°ë¡ë©ë‹ˆë‹¤:

```ts
{
  "eventId": "6629e2b1234abcde5678f000",
  "type": "login-streak",
  "current": {
    "days": 3
  },
  "lastUpdated": ISODate(),
  "rewardReceived": false
}
```

---

### 4ï¸âƒ£ ë³´ìƒ ìš”ì²­ ë° ìˆ˜ë ¹
- ì‚¬ìš©ìê°€ `/event/:id/reward-request` APIë¥¼ í˜¸ì¶œí•˜ì—¬ ë³´ìƒì„ ìˆ˜ë ¹í•©ë‹ˆë‹¤.
- ë¼ìš°íŒ… íë¦„ :
  - ìœ ì €ê°€ `POST /event/:id/reward` í˜¸ì¶œ
  - `event-service`ê°€ `auth-service`ì˜ ë‚´ë¶€ API í˜¸ì¶œ
  - `auth-service` â†’ `user.eventProgress[*].rewardReceived` ì„±ê³µì‹œ trueë¡œ ì „í™˜
  - `event-service` ì„±ê³µ/ì‹¤íŒ¨ ê¸°ë¡ ë¡œê·¸ ì €ì¥
- ë³´ìƒ ìš”ì²­ ì´ë ¥ì´ ë‹¤ìŒê³¼ ê°™ì´ ê¸°ë¡ë©ë‹ˆë‹¤.

```ts
{
  "userId": ObjectId("..."),
  "eventId": ObjectId("..."),
  "processedAt": ISODate(),
  "status": "success" | "fail",
  "reason": "ì¡°ê±´ ë¯¸ë‹¬" // ì‹¤íŒ¨ ì‹œë§Œ í¬í•¨
}
```

---



## âœ… ë‚´ ì„œë¹„ìŠ¤ì˜ ì¥ë‹¨ì 

### ğŸ‘ ì¥ì 
- guest ê¶Œí•œ ë„ì…ìœ¼ë¡œ **ìš´ì˜ì, ê°ì‹œìì˜ ì´ë²¤íŠ¸ ë¶€ì • ìˆ˜ê¸‰, ë‚´ì—­ í™•ì¸ë“±ì˜ í–‰ìœ„ë¥¼ ì›ì²œ ì°¨ë‹¨**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ë‹¤ì–‘í•œ í˜•íƒœ**ì˜ ì´ë²¤íŠ¸ì™€, ë³´ìƒ ë“±ë¡, ìœ ì €ì˜ ë³´ìƒ ì§€ê¸‰ ìƒíƒœë¥¼ **ìœ ì—°í•˜ê²Œ ê´€ë¦¬**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **Microservice êµ¬ì¡° ê¸°ë°˜ ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬**ë¡œ, ìœ ì§€ë³´ìˆ˜ì™€ í™•ì¥ì„±ì— ê°•í•œ êµ¬ì¡°ë¥¼ ê°€ì¡ŒìŠµë‹ˆë‹¤.


### ğŸ”§ ì‹œê°„ì´ ë” ì£¼ì–´ì§„ë‹¤ë©´, ì´ëŸ° ë¦¬í™í† ë§ì„...
- **ê³µí†µ ì˜ˆì™¸ ì²˜ë¦¬ ì¶”ìƒí™”**
  - ê° ì„œë¹„ìŠ¤ì—ì„œ ë°˜ë³µë˜ëŠ” ì—ëŸ¬ í•¸ë“¤ë§ì„ `CustomErrorHandler` í´ë˜ìŠ¤ ë“±ìœ¼ë¡œ í†µí•©.
- **í˜ì´ì§€ë„¤ì´ì…˜ ë„ì…**
  - ì„œë¹„ìŠ¤ ê´€ë¦¬ìì˜ ìš”êµ¬ì— ë§ê²Œ í˜ì´ì§€ë„¤ì´ì…˜ ë„ì….
- **ì´ë²¤íŠ¸ ì¡°ê±´ ë‹¬ì„±ë„ ì„¸ë¶„í™”**
  - ex: "10ëª…ì˜ ì¹œêµ¬ ì´ˆëŒ€ ì‹œ ë³´ìƒ ì§€ê¸‰" ì´ë²¤íŠ¸ì—ì„œ, 3ëª…, 5ëª…, 10ëª… ë‹¨ìœ„ë¡œ ì„¸ë¶„í™”ëœ ë‹¬ì„±ë¥  êµ¬í˜„
  - ë³„ë„ì˜ ì»¬ë ‰ì…˜ì„ ì¶”ê°€í•´ ê° ìœ ì €ì˜ í˜„ì¬ ì¡°ê±´ ë‹¬ì„± í˜„í™© ì¶”ì  ê°€ëŠ¥í•˜ê²Œ ê°œì„ .

---



## âœ… API ëª…ì„¸ì„œ
### ğŸ” AUTH API ëª…ì„¸ì„œ
| ë©”ì„œë“œ   | ê²½ë¡œ                        | ì„¤ëª…           | ê¶Œí•œ                    | DTO êµ¬ì¡° / Body ìš”ì²­                                               |
| ----- | ------------------------- | ------------ | --------------------- | -------------------------------------------------------------- |
| `POST`  | `/auth/register`          | íšŒì›ê°€ì…         | âŒ ëˆ„êµ¬ë‚˜ ê°€ëŠ¥              | `username: string`<br>`password: string`<br>`nickname: string` |
| `POST`  | `/auth/login`             | ë¡œê·¸ì¸ (JWT ë°œê¸‰) | âŒ ëˆ„êµ¬ë‚˜ ê°€ëŠ¥              | `username: string`<br>`password: string`                       |
| `GET`   | `/auth/users`             | ì „ì²´ ìœ ì € ëª©ë¡ ì¡°íšŒ  | âœ… `operator`, `admin` | ì—†ìŒ                                                             |
| `PATCH` | `/auth/user/:userId/role` | ìœ ì € ì—­í•  ë³€ê²½     | âœ… `admin`ë§Œ ê°€ëŠ¥         | `role: 'user' \| 'operator' \| 'admin' \| 'auditor'`           |


### ğŸ“˜ EVENT API ëª…ì„¸ì„œ
| ë©”ì„œë“œ   | ê²½ë¡œ                                     | ì„¤ëª…           | ê¶Œí•œ                               | DTO êµ¬ì¡° / Body ìš”ì²­                                                                                                 |
| ----- | -------------------------------------- | ------------ | -------------------------------- | ---------------------------------------------------------------------------------------------------------------- |
| `POST`  | `/event/create`                        | ì´ë²¤íŠ¸ ìƒì„±       | âœ… `operator`, `admin`            | `name: string`<br>`description: string`<br>`startDate: Date`<br>`endDate: Date`                                  |
| `GET`   | `/event`                               | ëª¨ë“  ì´ë²¤íŠ¸ ëª©ë¡ ì¡°íšŒ | âœ… `operator`, `admin`            | ì—†ìŒ                                                                                                               |
| `GET`   | `/event/:id`                           | íŠ¹ì • ì´ë²¤íŠ¸ ìƒì„¸ ì¡°íšŒ | âœ… `operator`, `admin`            | ì—†ìŒ                                                                                                               |
| `PATCH` | `/event/:id/status`                    | ì´ë²¤íŠ¸ ë§ˆê° ì²˜ë¦¬    | âœ… `operator`, `admin`            | ì—†ìŒ                                                                                                               |
| `POST`  | `/event/:id/reward`                    | ë³´ìƒ ë“±ë¡        | âœ… `operator`, `admin`            | `rewardType: 'point' \| 'item' \| 'coupon'`<br>`amount?: number`<br>`itemCode?: string`<br>`couponCode?: string` |
| `POST`  | `/event/:id/join`                      | ì´ë²¤íŠ¸ ì°¸ì—¬       | âœ… `user`, `admin`                | ì—†ìŒ                                                                                                               |
| `POST`  | `/event/:id/reward-request`            | ë³´ìƒ ìš”ì²­        | âœ… `user`, `admin`                | ì—†ìŒ                                                                                                               |
| `GET`   | `/event/reward-request/mine`           | ë‚´ ë³´ìƒ ìˆ˜ë ¹ ì´ë ¥   | âœ… `user`, `admin`                | ì—†ìŒ                                                                                                               |
| `GET`   | `/event/reward-request/all`            | ì „ì²´ ë³´ìƒ ì´ë ¥     | âœ… `operator`, `admin`, `auditor` | ì—†ìŒ                                                                                                               |
| `GET`   | `/event/reward-request/event/:eventId` | íŠ¹ì • ì´ë²¤íŠ¸ ë³´ìƒ ì´ë ¥ | âœ… `operator`, `admin`, `auditor` | ì—†ìŒ                                                                                                               |

---



## ğŸ“ ê´€ë ¨ ë°ì´í„° ì»¬ë ‰ì…˜ êµ¬ì¡° ìš”ì•½
ğŸ”¹ `user` ì»¬ë ‰ì…˜
```ts
{
  "eventProgress": [],
  "_id": ObjectId("..."),,
  "username": "auditor",
  "password": "hashed...",
  "role": "auditor",
  "joinedAt": ISODate()
}
```

ğŸ”¹ `event` ì»¬ë ‰ì…˜
```ts
{
  _id: ObjectId,
  name: string,
  type: string,
  conditions: Record<string, any>,
  status: "active" | "inactive",
  startAt: Date,
  endAt: Date
}
```
ğŸ”¹ `reward` ì»¬ë ‰ì…˜
```ts
{
  _id: ObjectId,
  eventId: ObjectId,
  rewardType: "point" | "item" | "coupon",
  amount?: number,
  itemCode?: string,
  couponCode?: string
}
```
ğŸ”¹ `rewardRequest` ì»¬ë ‰ì…˜
```ts
{
  userId: ObjectId,
  eventId: ObjectId,
  processedAt: Date,
  status: "success" | "fail",
  reason?: string
}
```